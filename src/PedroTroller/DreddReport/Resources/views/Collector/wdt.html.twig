{% extends 'WebProfilerBundle:Profiler:layout.html.twig' %}

{% block head %}
    {{ parent() }}
    <script type="text/javascript">
        function showElement(classname) {
            var elements = document.getElementsByClassName(classname);

            for (var i = 0; i < elements.length; i++) {
                var element = elements[i];

                if (element.style.display != '') {
                    element.style.display = '';
                } else {
                    element.style.display = 'none';
                }
            }
        }
    </script>
{% endblock head %}

{% block base64 %}
iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAh1BMVEUAAAD///+3t7f7+/v29vbt7e3b29vx8fHo6OhISEjQ0NDMzMzz8/NtbW34+Pj8/PzGxsYdHR3h4eGzs7OCgoImJiZUVFQ7OzsODg4vLy/V1dVkZGScnJynp6dNTU16enpdXV2MjIyVlZVpaWk3NzehoaGJiYkVFRVzc3MhISF/f38xMTFCQkKz11t6AAAAAWJLR0QAiAUdSAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+ABExAbC4ee0YEAAADNSURBVDjL7ZTLDsIgEEW5bagLo11ojI9SF8baRv//+wRSdMJzNC6dDelwci8MMxUiFYDgxAFgkQbDrogp8PQwc92DhV0Kqs4VyPuf9aYU4g6USCpnos+4b0CjeB0G+S2YJq+/9h6Z1j6GKYrVPtbauvrY5LZPxDbiTk7V2FXpXguP2ThsZb6OpIkqiu39S/a6bReh3AvbvnM3m1hSTMZqVmXkWj87xivsFWGt4nIDZzYZYzxjXXHaB+ZfwT6IFP/4IILBAWreIKaeJAY+AZkYBblIzwUMAAAAAElFTkSuQmCC
{% endblock base64 %}

{% block user %}    
iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woDDSArRln9pAAABPZJREFUeNrtnc9rVFcUxz8zk2iq8Re2qWimmkiVoBXaTS0uRCQgKJWWQlusblwIWUiRutZNFxVBt/kH2oXQbhrQ1lJBSFDwB1oRom2UkiKpolaj+WXSxT1PkjBDXt683B+55wMHQmby3sn5vvPm3jP3nlfAf0rAYqAR+Aj4ENgEtAJvA8uAorx3HHgK/AvcBW4Bl4Ae4DkwCLxCyUQ9sBP4FrgKTNRoV+VYO+XYyixoBy4AT3IQYro9kWO3a5jT0TkHIlSzTg13ddYBNy2KkdhNObcyiTag14EYifWKDwrQIKOhCcd2S3yJnjMeiJHYmdjF2C+BGPdAjMSH/bGK8SbQ51F2JPaX+OaEouPsKHt4obzjMktcCbIc2CNlER9LNXvEx2jYAgx7eLtKbFh8jCZDtgMLPL5gFoiP0QjycQBZ7MTHgqN/dgT/K66jLrLYRYZsIIzyd734Ou8F2RrQ4GNrDIK8F9hocN4LsjEgQaK4ZZUDEqQcgyBNAQnSFIMgywISxLqvLuYhr3Bb1JwN41iut7kIzERAGWLd1yKKV7gQZCSg+IzEIEh/QIL0xyDInYAEuRODINcDEuR6DIJ0BySIdV9dzEMWY7YGhEAjZgvDvM6QQczSTd/ptS2Gy3lIVwCCOPFRBVFBAPgTs2rRV/rEx2gE+cfz0Va3+BiNICPAr5gFab4xDJwnrBJPLiwBHuDfqsUH4hsxZQjAM+B7Dy+UH8S3KFmBWZDmS3aMiU/EmCEAj4ETHl0g34lPUbMC03nBdXY8dJ0dvlAEjnggyBH0G9TXrMLNHvXE/hAflEl87lCQLzX8lfnRgRg/adirU8JuR4de/Nzn6BXvAwMWxBiQcykp2MfcbgodBr7SMM+OYzJznovZ+DENbza+AYZyFGMIOKphrY1PMH0UaxXjKfCphjMf3sU0tcwqxl0c7IaKgePA/VkIcV/+RslA2jViZeAQprfVvQoi9Mlrh0i/Ja2g4a9Mh9ye0rAIs+VsLaaHb6v83CSvpb0VdmjYK7NFhqSPgG0WzrdNzjVGWFu1rdDC1L6Lg8BhzFLOvGmUYw8ytd9ii8pgaMOUvyt9KF8k34bH7XLMaiX46DuTdjDzd+qjwM+YTm9ZKcsx0pwrms+UEmZ5TRnYDVzLMJ84JxPFVmAlpq1rYdpoqUFea5X3ns1wnmviY1l8tlYRzmu49wGwA1jK1J2rE3KON+TevVY+vGvtkPCf3PfvYaq2yYK7hTLKWod5gsLSGs/zN3BD5jPPgRcVYlYQf37HNPx3ygbMomQb5XLfbUBi4aQiUAecVBGq2kmJkRV2YXrbauBn7v+7a67FOAW81GCnthcSs9xpAC5rgDPbZXJs9N8MXNGg5vLIpeY8xOjRYOZmPbWIsgS4rUHM3W6TYf9JfcaZtFr6SkDqVrkl7D6YK1brTFuSOaDBsmYHZqplNUvdRpfl22Fcqtiv20BND/wvKoZVipjdyFM+LxKOA59pjKzzltypLkz+5WZJG72vu7F+0YCiVCUPAqv1YnXGatGgrgCsl8mKPkHZLaNAWwk4Ld/4KW4pAcsLokydxsMLxgqE1Wk6inGwooIoKogKoqggKoiigqggigqigigqiFJVkCENgzcMFQnrASvzne4SpgfIFxoLL/gazDawLvR7bdfWJVoAsEZFcS7GmunpshDYC/yGbsqxYS8l1nsnZ8b/ymhuQoT05tQAAAAASUVORK5CYII=
{% endblock user %}

{% block toolbar %}
    {% if collector.data.cases is not empty %}
        {% set icon %}
            <img width="20" height="28" alt="DreddReport" src="data:image/png;base64,{{- block('base64') -}}" />
        {% endset %}
        {% set text %}
            {% for key, data in collector.data.polls %}
                <div>
                    {% if data.sentence == true %}
                        <span class="sf-toolbar-status sf-toolbar-status-green">OK</span>
                    {% else %}
                        <span class="sf-toolbar-status sf-toolbar-status-red">KO</span>
                    {% endif %}
                    <abbr title="{{ data.object }}">
                        {{ data.arguments|join(',') }}
                    </abbr>
                </div>
            {% endfor %}
        {% endset %}
        {% include 'WebProfilerBundle:Profiler:toolbar_item.html.twig' with { 'link': profiler_url } %}
    {% endif %}
{% endblock %}

{% block menu %}
<span class="label">
    <span class="icon">
        <img width="26" height="28" alt="DreddReport" src="data:image/png;base64,{{- block('base64') -}}" />
    </span>
    <strong>Voters</strong>
    <span class="count">
        <span>{{ collector.data.polls|length }}</span>
    </span>
</span>
{% endblock %}

{% block panel %}
    {% for key, poll in collector.data.polls %}
        <table>
            <thead>
                <tr>
                    <th style="width: 20px">Case</th>
                    <th>Arguments</th>
                    <th style="width: 20px"></th>
                </tr>
            </thead>
            <tbody>
                <tr style="font-weight: bold">
                    <td style="text-align: center">
                        <span style="    
                            display: inline-block;
                            font-size: 15px;
                        "> {{ loop.index }} </span>
                    </td>
                    <td>{{ poll.arguments|join(', ') }}</td>
                    <td>
                        {% if poll.sentence == true %}
                            <a href="javascript:showElement('{{ key }}');" style="
                                display: inline-block;
                                background-color: #aacd4e;
                                border-radius: 6px;
                                padding: 8px;
                                color: #fff;
                                margin-right: 2px;
                                font-size: 15px;
                                width: 40px;
                                font-weight: bold;
                                text-align: center;
                            ">OK</a>
                        {% else %}
                            <a href="javascript:showElement('{{ key }}');" style="
                                display: inline-block;
                                background-color: #a33;
                                border-radius: 6px;
                                padding: 8px;
                                color: #fff;
                                margin-right: 2px;
                                font-size: 15px;
                                width: 40px;
                                font-weight: bold;
                                text-align: center;
                            ">KO</a>
                        {% endif %}
                    </td>
                </tr>
                <tr style="font-weight: bold;display: none" class="{{ key }}">
                    <td>Subject</td>
                    <td colspan="2">{{ poll.object }}</td>
                </tr>
                {% set case = collector.data.cases[key]|default({votes: []}) %}
                {% for vote in case.votes %}
                    <tr style="display: none" class="{{ key }}">
                        <td style="text-align: center">
                            <img width="30" height="30" alt="Juror" src="data:image/png;base64,{{- block('user') -}}" />
                        </td>
                        <td>
                            {{ vote.juror }}
                        </td>
                        <td>
                            {% if vote.vote == constant('Symfony\\Component\\Security\\Core\\Authorization\\Voter\\VoterInterface::ACCESS_GRANTED') %}
                                <abbr style="    
                                    display: inline-block;
                                    background-color: #aacd4e;
                                    border-radius: 6px;
                                    padding: 8px;
                                    color: #fff;
                                    margin-right: 2px;
                                    font-size: 15px;
                                    width: 40px;
                                    font-weight: bold;
                                    text-align: center;
                                " title="This voter granted access">YES</abbr>
                            {% elseif vote.vote == constant('Symfony\\Component\\Security\\Core\\Authorization\\Voter\\VoterInterface::ACCESS_DENIED') %}
                                <abbr style="    
                                    display: inline-block;
                                    background-color: #a33;
                                    border-radius: 6px;
                                    padding: 8px;
                                    color: #fff;
                                    margin-right: 2px;
                                    font-size: 15px;
                                    width: 40px;
                                    font-weight: bold;
                                    text-align: center;
                                " title="This voter denied access">NO</abbr>
                            {% else %}
                                <abbr style="    
                                    display: inline-block;
                                    background-color: #666;
                                    border-radius: 6px;
                                    padding: 8px;
                                    color: #fff;
                                    margin-right: 2px;
                                    font-size: 15px;
                                    width: 40px;
                                    font-weight: bold;
                                    text-align: center;
                                " title="This voter abstains">-</abbr>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            <tbody>
        </table>
    {% endfor %}
{% endblock %}
